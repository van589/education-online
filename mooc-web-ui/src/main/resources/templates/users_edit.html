<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>个人注册</title>
    <link rel="stylesheet" type="text/css" href="/static/assets/css/index.css">
    <link rel="stylesheet" type="text/css" href="/static/assets/css/ziy.css">
</head>
<body>
<!--dengl-->
<div class="yiny">
    <div class="beij_center">
        <div class="dengl_logo">
            <a href="/main"><img src="/static/assets/images/logo(1).png"></a>
            <h1>个人中心</h1>
        </div>
    </div>
</div>
<div class="beij_center">
    <div class="ger_zhuc_beij">

        <h2 th:if="${baseResult != null}" th:text="${baseResult.message}" class="ger_border_color"></h2>

        <div class="ger_zhuc_biaot">
            <ul>
                <li class="ger_border_color"><a href="#">修改信息</a></li>
            </ul>
        </div>

        <div class="zhuc_biaod">
            <form action="/users/edit" id="inputForm" method="post" th:object="${session.user}">
                <div class="reg-items">
              	<span class="reg-label">
                	<label>用户名：</label>
              	</span>
                    <input name="name" id="name" th:value="${session.user.name}" class="i-text form-control required"
                           type="text">
                    <div id="usernameInfo"></div>
                </div>
                <div class="reg-items">
              	<span class="reg-label">
                	<label>昵称：</label>
              	</span>
                    <input name="nickname" th:value="${session.user.nickname}" class="i-text required" type="text">
                </div>
                <div class="reg-items">
              	<span class="reg-label">
                	<label>设置密码：</label>
              	</span>
                    <input name="password" th:value="${session.user.password}" class="i-text required" type="text">
                </div>
                <div class="reg-items">
              	<span class="reg-label">
                	<label>性别：</label>
              	</span>
                    <select name="sex" class="i-text required">
                        <option th:selected="${session.user.sex == 'Male'}" value="Male" selected="selected">男</option>
                        <option th:selected="${session.user.sex == 'Female'}" value="Female">女</option>
                    </select>
                </div>
                <div class="reg-items">
              	<span class="reg-label">
                	<label>手机号码：</label>
              	</span>
                    <input name="phone" th:value="${session.user.phone}" class="i-text required mobile" type="text">
                </div>
                <div class="reg-items">
              	<span class="reg-label">
                	<label>电子邮箱：</label>
              	</span>
                    <input name="email" th:value="${session.user.email}" class="i-text required email" type="text">
                </div>
                <div class="reg-items">
              	<span class="reg-label">
                	<label>微信号：</label>
              	</span>
                    <input name="wechar" th:value="${session.user.wechar}" class="i-text" type="text">
                </div>
                <div class="reg-items">
              	<span class="reg-label">
                	<label>学历：</label>
              	</span>
                    <select name="education" class="i-text">
                        <option value="" selected="selected" disabled>无</option>
                        <option th:selected="${session.user.education == '本科'}" value="本科">本科</option>
                        <option th:selected="${session.user.education == '专科'}" value="专科">专科</option>
                        <option th:selected="${session.user.education == '中专'}" value="中专">中专</option>
                        <option th:selected="${session.user.education == '高中'}" value="高中">高中</option>
                        <option th:selected="${session.user.education == '硕士'}" value="硕士">硕士</option>
                        <option th:selected="${session.user.education == '博士'}" value="博士">博士</option>
                    </select>
                </div>
                <div class="reg-items">
              	<span class="reg-label">
                	<label> </label>
              	</span>
                    <input class="reg-btn" value="立即修改" type="submit">
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 导入公共的 foot-->
<div th:replace="includes/common_includes :: common_foot"></div>

<!-- 导入公共的 copyright-->
<div th:replace="includes/common_includes :: common_copyright"></div>

<script type="text/javascript">
    $(function () {
        //为输入框绑定事件
        $("#name").blur(function () {
            //1失去焦点，获得表单输入数据
            var usernameInput = $(this).val();
            //2去服务端校验该用户名是否存在--ajax将用户名提交到服务器校验
            $.ajax({
                    url: "/register/check",
                    type: "GET",
                    contentType: "application/x-www-form-urlencoded; charset=utf-8",
                    data: {"name": usernameInput},
                    success: function (data) {
                        var isExit = data.status;
                        //3根据返回的isExit动态显示信息
                        var usernameInfo = data.message;
                        if (isExit === 500) {
                            $("#usernameInfo").css("color", "red");
                        } else {
                            $("#usernameInfo").css("color", "green");
                        }
                        $("#usernameInfo").html(usernameInfo);
                    },
                    dataType: "json",
                }
            );

        });
    });
</script>
</body>
</html>